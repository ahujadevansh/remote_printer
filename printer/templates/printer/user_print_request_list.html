{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
   Prints:{{user.email}}
{% endblock title %}

{% block css %}
<style>
  .table th {
    text-align: center;
  }
</style>
{% endblock css %}

{% block bodycontent %}
  <div class="container-fluid">

    <table class="table table-striped table-hover table-responsive mt-1" >
      <thead class="thead-dark">
        <tr>
          <th scope="col">Srno.</th>
          {% comment %} <th scope="col">description</th> {% endcomment %}
          <th scope="col">Status</th>
          <th scope="col">Requested On</th>
          <th scope="col">Printed On</th>
          <th scope="col">Cancelled On</th>
          <th scope="col">Rejected On</th>
          <th scope="col">Paid On</th>
          <th scope="col">Amount</th>
          <th colspan="3">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for print in prints %}
          <tr>
            <th scope="row">{{forloop.counter}}</th>
            {% comment %} <td>{{ print.description|safe|linebreaksbr|default:"nothing" }}</td> {% endcomment %}
            <td><a href="{% url 'printer:print_request_detail' print.pk %}">{{ print.get_status_display }}</a></td>
            <td>{{ print.created_at }}</td>
            <td>{{ print.printed_on|default:"Not Yet" }}</td>
            <td>{{ print.cancelled_on|default:"Not Yet" }}</td>
            <td>{{ print.rejected_on|default:"Not Yet" }}</td>
            <td>{{ print.paid_on|default:"Not Yet" }}</td>
            <td>{{ print.amount|default:"Not Yet" }}</td>
            {% if print.status == 1 %}
              <td><a href="#" class="btn btn-warning" >Cancel</a></td>
            {% elif print.status == 4 %}
              <td><a href="#" class="btn btn-info" >Re apply</a></td>
            {% elif print.status == 2 %}
              <td></td>
            {% elif print.status == 3 or print.status == 4 or print.status == 5 %}
              <td><a href="{% url 'printer:print_request_delete' print.pk %}" class="btn btn-danger" >Delete</a></td>
            {% endif %}
          </tr>
        {% endfor %}
      </tbody>
    </table>

    {% include "includes/paginate.html" %}
  </div>
{% endblock bodycontent %}
