{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load humanize %}
{% block title %}
   Print Requests
{% endblock title %}

{% block css %}
<style>
  .table th,
  .table td {
    text-align: center;
  }
</style>
{% endblock css %}

{% block bodycontent %}
  <div class="container-fluid">

    <table class="table table-striped table-hover table-responsive mt-1" >
      <thead class="thead-dark">
        <tr>
          <th scope="col">Request Id</th>
          <th scope="col">Client</th>
          <th scope="col">Status</th>
          <th scope="col">Requested On</th>
          <th scope="col">Paid On</th>
          <th scope="col">Amount</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for print in prints %}
          <tr>
            <td>{{ print.pk }}</td>
            <td>{{ print.client }}</td>
            <td><a href="{% url 'printer:staff_print_request_detail' print.pk %}">{{ print.get_status_display }}</a></td>
            <td>{{ print.created_at|naturalday }}</td>
            <td>{{ print.paid_on|default:"Not Yet"|naturalday }}</td>
            <td>{{ print.amount|default:"Not Yet" }}</td>
            <td>
              {% if print.status == 1 %}
                <a href="{% url 'printer:print_request_cancel' print.pk %}" class="btn btn-warning mx-1" >Cancel</a>
              {% endif %}
              {% if print.status == 4 %}
                <a href="{% url 'printer:print_request_reapply' print.pk %}" class="btn btn-info mx-1" >Re apply</a>
              {% endif %}
              {% if print.status == 3 or print.status == 4 or print.status == 5 %}
                <a href="{% url 'printer:print_request_delete' print.pk %}" class="btn btn-danger mx-1" >Delete</a>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    {% include "includes/paginate.html" %}
  </div>
{% endblock bodycontent %}
